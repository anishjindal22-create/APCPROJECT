<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Admin - Users</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body {font-family: system-ui, sans-serif; margin: 0; padding: 0; background: #f7f7fb;}
        header {display:flex; align-items:center; justify-content:space-between; padding: 1rem 1.25rem; background:#fff; border-bottom:1px solid #eee;}
        header a {text-decoration:none; color:#4f46e5;}
        .container {max-width: 960px; margin: 2rem auto; padding: 0 1rem;}
        .card {background: #fff; padding: 1rem; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.06); margin-bottom: 1rem;}
        table {width:100%; border-collapse: collapse;}
        th, td {padding: .6rem; border-bottom: 1px solid #eee;}
    </style>
</head>
<body>
    <header>
        <div><strong>Admin</strong></div>
        <nav>
            <a th:href="@{/}">Back</a>
        </nav>
    </header>
    <div class="container">
        <div class="card">
            <h2 style="margin-top:0">Users</h2>
            <table>
                <thead>
                <tr><th>ID</th><th>Email</th><th>Roles</th><th>Created</th><th>Actions</th></tr>
                </thead>
                <tbody>
                    <tr th:each="u : ${users}">
                        <td th:text="${u.id}"></td>
                        <td th:text="${u.email}"></td>
                        <td>
                            <span th:each="r : ${u.roles}" th:text="${r.name}" style="margin-right:.25rem"></span>
                        </td>
                        <td th:text="${#temporals.format(u.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
                        <td>
                            <form method="post" th:action="@{/admin/delete-user}" style="display:inline" onsubmit="return confirm('Delete this user and all their replies?');">
                                <input type="hidden" name="id" th:value="${u.id}" />
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                <button type="submit" style="background:#dc2626; color:#fff; border:none; border-radius:8px; padding:.4rem .6rem;">Delete</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>

